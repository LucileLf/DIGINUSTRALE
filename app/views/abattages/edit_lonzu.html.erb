
<div class="container-global">
  <%= render "shared/head_bar" %>
  <div class="nav-container">
    <div class="head-info">
      <div>
        <h2 class="active">Lot n° <%= @abattage.numéro_lot %> - Etape 3 | Lonzu</h2>
      </div>

      <div class="elevage">
        <p>Date et lieu d'abattage</p>
        <p><%= @abattage.date.strftime("%d/%m/%Y") %>, <%= @abattage.lieu %></p>
      </div>
    </div>
  </div>

  <div class="form-create-container" data-controller="checkable">
    <div class="formBloc">
    <%= simple_form_for @abattage, url: abattage_update_lonzu_path(@abattage), data: { turbo: "false", action: "keyup->checkable#validateForm".html_safe  }, method: :patch do |fp| %>
      <table class="table">
        <thead>
          <tr>
            <th class="header">Boucle porc</th>
            <th class="header">Poids(kg)</th>
            <th class="header">Date mise au sel</th>
            <th class="header">Date sortie de sel</th>
            <th class="header">Durée de fumage (jours)</th>
            <th class="header">Poids sortie de sèche (kg)</th>
            <th class="header">Date entrée affinage</th>
            <th class="header">Date sortie affinage vente</th>
            <th class="header"></th>
          </tr>
        </thead>
        <tbody>
            <tr class="form-row">
              <td class="boucle-porc">
                <select name="ipg">
                  <% @abattage.porcs.each do |porc| %>
                    <option value="<%= porc.boucle %>" <%= "selected" if @lonzu_temoin&.porc == porc %>><%= porc.boucle %></option>
                  <% end %>
                </select>
              </td>
              <td class="form-input">
                <input type="number" step="1" name="poids" value="<%= @lonzu_temoin&.poids %>" data-checkable-target="checkable">
              </td>
              <td class="form-input">
                <input type="date" step="1" name="date_mise_au_sel" value="<%= @lonzu_temoin&.date_mise_au_sel %>" data-checkable-target="checkable">
              </td>
              <td class="form-input">
                <input type="date" step="1" name="date_sortie_de_sel" value="<%= @lonzu_temoin&.date_sortie_de_sel %>" data-checkable-target="checkable">
              </td>
              <td class="form-input">
                <input type="number" step="1" name="durée_fumage" value="<%= @lonzu_temoin&.durée_fumage %>" data-checkable-target="checkable">
              </td>
              <td class="form-input">
                <input type="number" step="1" name="poids_sortie_sèche" value="<%= @lonzu_temoin&.poids_sortie_sèche %>" data-checkable-target="checkable">
              </td>
              <td class="form-input">
                <input type="date" step="1" name="date_entrée_affinage" value="<%= @lonzu_temoin&.date_entrée_affinage %>" data-checkable-target="checkable">
              </td>
              <td class="form-input">
                <input type="date" step="1" name="date_sortie_affinage_vente" value="<%= @lonzu_temoin&.date_sortie_affinage_vente %>" data-checkable-target="checkable">
              </td>
            </tr>
        </tbody>
      </table>
      <div class="d-flex justify-content-between form-actions">
        <%= link_to "Annuler", abattage_path(@abattage), class: "annuler-button", data: { turbo: "false" } %>
        <div class="decoupe d-none" data-checkable-target="decoupe">
          <%= fp.button :submit, 'Valider', class: 'submit-button' %>
        </div>
      </div>
    <% end %>
    </div>
  </div>
</div>
